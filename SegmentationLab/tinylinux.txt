1a -  Configure Interface - Prod
sudo ifconfig eth0 192.168.110.100 netmask 255.255.255.0 up
sudo route add default gw 192.168.110.1

1b -  Configure Interface - Dev
sudo ifconfig eth0 192.168.110.100 netmask 255.255.255.0 up
sudo route add default gw 192.168.110.1

2 - Verify
ping 8.8.8.8

3 - Configure Name Resolution
sudo echo "nameserver 8.8.8.8" > /etc/resolv.conf

4 - Verify
ping google.com

5 - load tools
tce-load -wi nano
tce-load -wi dropbear
tce-load -wi busybox-httpd
tce-load -wi git


6 - Verify
curl google.com

filetool.sh -b

---

7 - Enable SSH
sudo mkdir -p /etc/dropbear

# Generate RSA key
sudo dropbearkey -t rsa -f /etc/dropbear/dropbear_rsa_host_key

# (Optional) Generate DSS key
sudo dropbearkey -t dss -f /etc/dropbear/dropbear_dss_host_key

# (Optional) Generate ECDSA key
sudo dropbearkey -t ecdsa -f /etc/dropbear/dropbear_ecdsa_host_key

sudo dropbear -F -E

8 - SSH to host

From NXOS
ssh gns3@192.168.110.100
password - gns3

9 - Make Web dir & index.html
cd /var
mkdir www
cd www
nano index.html 

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Random Joke</title>
  <style>
    body {
  margin: 0;
  padding: 0;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background-color: #f9f9f9;
  color: #333;
  text-align: center; /* Ensures all text in body is centered */
}

.container {
  padding: 2em;
  border-radius: 8px;
  background: #ffffff;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
  max-width: 600px;
  width: 90%;
}

h1 {
  font-size: 2em;
  margin-bottom: 1em;
  text-align: center;
}

p {
  font-size: 1.2em;
  margin: 0.5em 0;
}

#punchline {
  font-weight: bold;
  color: #007acc;
}

  </style>
</head>
<body>
  <div class="container">
    <h1>Random Joke</h1>
    <p id="setup">Loading...</p>
    <p id="punchline"></p>
  </div>

  <script>
    fetch('https://official-joke-api.appspot.com/random_joke')
      .then(response => response.json())
      .then(data => {
        document.getElementById('setup').textContent = data.setup;
        document.getElementById('punchline').textContent = data.punchline;
      })
      .catch(error => {
        document.getElementById('setup').textContent = 'Failed to fetch joke.';
        console.error('Error:', error);
      });
  </script>
</body>
</html>


Optional - find the httpd
sudo find / -name httpd

10 - Launch Server
sudo /usr/local/httpd/sbin/httpd -f -h /var/www


---

for Centos:
sudo dhclient ens3
ip addr show

---

for Ubuntu

Old Way:
sudo ip addr add 192.168.52.100/24 dev ens3
sudo ip route add default via 192.168.52.1 dev ens3

New Way w/Netplan:
cd ../..
cd /etc/netplan
ls -la
sudo nano /etc/netplan/00-installer-config.yaml


network:
  version: 2
  ethernets:
    ens3:
      dhcp4: no
      addresses: [192.168.52.100/24]
      routes:
        - to: default
          via: 192.168.52.1
      nameservers:
        addresses: [8.8.8.8, 8.8.4.4]

Ctrl+O
Enter
Control+X
Enter

sudo netplan apply

ping 192.68.52.1
ping 8.8.8.8
ping google.com

hostnamectl
resolvectl

# --- Kubernetes --- #


# --- Step 1: Update and Upgrade APT ---
echo "Updating and upgrading apt packages..."
sudo apt update -y
sudo apt upgrade -y
sudo apt autoremove -y

# --- Step 2: Disable Swap ---
# Kubernetes requires swap to be disabled for kubelet to function correctly.
echo "Disabling swap..."
sudo swapoff -a
# Remove swap entry from /etc/fstab to make the change persistent across reboots
sudo sed -i '/ swap / s/^\(.*\)$/#\1/g' /etc/fstab

# --- Step 3: Load Kernel Modules and Configure Sysctl Parameters ---
# These modules are required for Kubernetes networking (especially for CNI like Cilium).
echo "Loading kernel modules and configuring sysctl parameters..."
sudo modprobe overlay
sudo modprobe br_netfilter

# Add kernel modules to load at boot
cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
overlay
br_netfilter
EOF

# Configure sysctl parameters for Kubernetes networking
cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward                 = 1
EOF

# Apply sysctl parameters immediately
sudo sysctl --system

# --- Step 4: Install Container Runtime (Containerd) ---
# Kubernetes uses a container runtime to run containers. Containerd is a popular choice.
echo "Installing containerd..."
# Add Docker's official GPG key
sudo apt update
sudo apt install -y ca-certificates curl gnupg
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

# Add Docker repository to APT sources
echo \
  "deb [arch=\"$(dpkg --print-architecture)\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  \"$(. /etc/os-release && echo \"$VERSION_CODENAME\")\" stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# Install containerd
sudo apt update
sudo apt install -y containerd.io

# Configure containerd to use systemd cgroup driver
sudo mkdir -p /etc/containerd
sudo containerd config default | sudo tee /etc/containerd/config.toml
sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml

# Restart containerd service
sudo systemctl restart containerd
sudo systemctl enable containerd

# --- Step 5: Install kubeadm, kubelet, and kubectl ---
# These are the core Kubernetes tools for cluster management.
echo "Installing kubeadm, kubelet, and kubectl..."
# Add Kubernetes GPG key
sudo apt update
sudo apt install -y apt-transport-https ca-certificates curl
curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.29/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg

# Add Kubernetes APT repository
echo 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list

# Update apt package index and install kubelet, kubeadm, kubectl
sudo apt update
sudo apt install -y kubelet kubeadm kubectl

# Hold packages to prevent automatic upgrades that might break the cluster
sudo apt-mark hold kubelet kubeadm kubectl

echo "Initial setup complete on this node. Please run these commands on ALL your Ubuntu 22.04 nodes."
